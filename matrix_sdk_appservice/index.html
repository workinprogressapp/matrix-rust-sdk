<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Matrix Application Service library"><title>matrix_sdk_appservice - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-fbd14db5c88ed452.css" id="mainThemeStyle"><div id="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="matrix_sdk_appservice" data-themes="" data-resource-suffix="" data-rustdoc-version="1.70.0-nightly (cf7ada217 2023-04-03)" data-search-js="search-bc5a112813b5d712.js" data-settings-js="settings-f0c5c39777a9a2f6.js" data-settings-css="settings-0bcba95ff279c1db.css" data-theme-light-css="light-db279b6232be9c13.css" data-theme-dark-css="dark-cf923f49f397b216.css" data-theme-ayu-css="ayu-be46fdc453a55015.css" ></div><script src="../static.files/storage-d4a1a279bad1a0c0.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-8e6affb8c73a5ff1.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../static.files/light-db279b6232be9c13.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../static.files/dark-cf923f49f397b216.css"><link rel="stylesheet" href="../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../matrix_sdk_appservice/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../matrix_sdk_appservice/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Crate matrix_sdk_appservice</a></h2><div class="sidebar-elems"><ul class="block"><li class="version">Version 0.1.0</li><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#reexports">Re-exports</a></li><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#types">Type Definitions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">matrix_sdk_appservice</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../src/matrix_sdk_appservice/lib.rs.html#15-1032">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Matrix <a href="https://matrix.org/docs/spec/application_service/r0.1.2">Application Service</a> library</p>
<p>The appservice crate aims to provide a batteries-included experience by
being a thin wrapper around the [<code>matrix_sdk</code>]. That means that we</p>
<ul>
<li><input disabled="" type="checkbox" checked=""/>
ship with functionality to configure your webserver crate or simply
run the webserver for you</li>
<li><input disabled="" type="checkbox" checked=""/>
receive and validate requests from the homeserver correctly</li>
<li><input disabled="" type="checkbox" checked=""/>
allow calling the homeserver with proper user identity assertion</li>
<li><input disabled="" type="checkbox" checked=""/>
have consistent room state by leveraging matrix-sdk’s state store</li>
<li><input disabled="" type="checkbox"/>
provide E2EE support by leveraging matrix-sdk’s crypto store</li>
</ul>
<h2 id="status"><a href="#status">Status</a></h2>
<p>The crate is in an experimental state. Follow
<a href="https://github.com/matrix-org/matrix-rust-sdk/issues/228">matrix-org/matrix-rust-sdk#228</a> for progress.</p>
<h2 id="registration"><a href="#registration">Registration</a></h2>
<p>The crate relies on the appservice registration being always in sync with
the actual registration used by the homeserver. That’s because it’s required
for the access tokens and because membership states for appservice users are
determined based on the registered namespaces.</p>
<h2 id="quickstart"><a href="#quickstart">Quickstart</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>matrix_sdk_appservice::{
    ruma::events::room::member::SyncRoomMemberEvent, AppService,
    AppServiceRegistration,
};

<span class="kw">let </span>homeserver_url = <span class="string">&quot;http://127.0.0.1:8008&quot;</span>;
<span class="kw">let </span>server_name = <span class="string">&quot;localhost&quot;</span>;
<span class="kw">let </span>registration = AppServiceRegistration::try_from_yaml_file(
    <span class="string">&quot;./tests/registration.yaml&quot;</span>,
)<span class="question-mark">?</span>;

<span class="kw">let </span><span class="kw-2">mut </span>appservice = AppService::builder(
    homeserver_url.try_into()<span class="question-mark">?</span>,
    server_name.try_into()<span class="question-mark">?</span>,
    registration,
)
.build()
.<span class="kw">await</span><span class="question-mark">?</span>;
appservice.user(<span class="prelude-val">None</span>).<span class="kw">await</span><span class="question-mark">?</span>.add_event_handler(
    |_ev: SyncRoomMemberEvent| <span class="kw">async </span>{
        <span class="comment">// do stuff
    </span>},
);

<span class="kw">let </span>(host, port) = appservice.registration().get_host_and_port()<span class="question-mark">?</span>;
appservice.run(host, port).<span class="kw">await</span><span class="question-mark">?</span>;</code></pre></div>
<p>Check the <a href="https://github.com/matrix-org/matrix-rust-sdk/tree/main/crates/matrix-sdk-appservice/examples">examples directory</a> for fully working examples.</p>
</div></details><h2 id="reexports" class="small-section-header"><a href="#reexports">Re-exports</a></h2><ul class="item-table"><li><div class="item-name" id="reexport.matrix_sdk"><code>pub use matrix_sdk;</code></div></li><li><div class="item-name" id="reexport.ruma"><code>pub use matrix_sdk::ruma;</code></div></li><li><div class="item-name" id="reexport.AppServiceRegistration"><code>pub use registration::<a class="struct" href="registration/struct.AppServiceRegistration.html" title="struct matrix_sdk_appservice::registration::AppServiceRegistration">AppServiceRegistration</a>;</code></div></li><li><div class="item-name" id="reexport.UserBuilder"><code>pub use user::<a class="struct" href="user/struct.UserBuilder.html" title="struct matrix_sdk_appservice::user::UserBuilder">UserBuilder</a>;</code></div></li></ul><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="event_handler/index.html" title="mod matrix_sdk_appservice::event_handler">event_handler</a></div></li><li><div class="item-name"><a class="mod" href="registration/index.html" title="mod matrix_sdk_appservice::registration">registration</a></div><div class="desc docblock-short">AppService Registration.</div></li><li><div class="item-name"><a class="mod" href="user/index.html" title="mod matrix_sdk_appservice::user">user</a></div><div class="desc docblock-short">AppService users.</div></li></ul><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.AppService.html" title="struct matrix_sdk_appservice::AppService">AppService</a></div><div class="desc docblock-short">AppService</div></li><li><div class="item-name"><a class="struct" href="struct.AppServiceBuilder.html" title="struct matrix_sdk_appservice::AppServiceBuilder">AppServiceBuilder</a></div><div class="desc docblock-short">Builder for an AppService</div></li><li><div class="item-name"><a class="struct" href="struct.AppServiceRouter.html" title="struct matrix_sdk_appservice::AppServiceRouter">AppServiceRouter</a></div></li></ul><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.Error.html" title="enum matrix_sdk_appservice::Error">Error</a></div></li></ul><h2 id="types" class="small-section-header"><a href="#types">Type Definitions</a></h2><ul class="item-table"><li><div class="item-name"><a class="type" href="type.Result.html" title="type matrix_sdk_appservice::Result">Result</a></div></li></ul></section></div></main></body></html>